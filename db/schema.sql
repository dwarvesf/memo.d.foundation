CREATE TABLE processing_metadata(file_path VARCHAR PRIMARY KEY, last_processed_at TIMESTAMP, git_commit_timestamp TIMESTAMP, processing_status VARCHAR DEFAULT('processed'), created_at TIMESTAMP DEFAULT(CURRENT_TIMESTAMP), updated_at TIMESTAMP DEFAULT(CURRENT_TIMESTAMP));;
CREATE TABLE processing_metadata_backup(id INTEGER, last_processed_at TIMESTAMP);;
CREATE TABLE vault(file_path VARCHAR UNIQUE, md_content VARCHAR, spr_content VARCHAR, embeddings_gemini FLOAT[768], embeddings_spr_custom FLOAT[1024], title VARCHAR, short_title VARCHAR, description VARCHAR, tags VARCHAR[], authors VARCHAR[], date DATE, pinned BOOLEAN, hide_frontmatter BOOLEAN, hide_title BOOLEAN, hide_on_sidebar BOOLEAN, hiring BOOLEAN, featured BOOLEAN, draft BOOLEAN, social VARCHAR[], github VARCHAR, website VARCHAR, avatar VARCHAR, discord_id VARCHAR, aliases VARCHAR[], icy DOUBLE, bounty DOUBLE, PICs VARCHAR[], status VARCHAR, "function" VARCHAR, estimated_tokens BIGINT, total_tokens BIGINT, should_deploy_perma_storage BOOLEAN, perma_storage_id VARCHAR, should_mint BOOLEAN, minted_at DATE, token_id VARCHAR, previous_paths VARCHAR[], ai_summary BOOLEAN, ai_generated_summary VARCHAR[], has_redirects BOOLEAN, redirect VARCHAR[], keywords VARCHAR[]);;
CREATE INDEX idx_processing_metadata_last_processed_at ON processing_metadata(last_processed_at);;

