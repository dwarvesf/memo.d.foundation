@import 'tailwindcss';
@import 'tailwindcss/preflight' layer(base);
@import 'tailwindcss/utilities' layer(utilities);
@config "../../tailwind.config.mjs";

@layer base {
  :root {
    /* Main colors */
    --primary: #e13f5e;
    --primary-hover-color: #d95870;
    --primary-foreground: #ffffff;
    --primary-foreground-color: #ffffff;
    --primary-color-lighten: rgba(255, 160, 179, 0.125);
    --docsearch-primary-color: #e13f5e;

    /* Light theme */

    --primary-font-color-light: #2c2d32;
    --primary-background-color-light: #fff;
    --primary-border-color-light: #ededed;
    --secondary-font-color-light: #636466;
    --secondary-font-color-light-var2: #636466;
    --secondary-background-color-light: #f8f8f8;
    --tertiary-background-color-light: #ebebeb;
    --secondary-tag-color-light: #f4f3f2;
    --border-color-light: #dbdbdb;

    /* Dark theme elements - only used in dark mode */
    --primary-font-color: #ddd;
    --secondary-font-color: #e8e8e8;
    --primary-background-color: #1e1e1e;
    --secondary-background-color: #282828;
    --secondary-background-color-var2: #202020;
    --tertiary-background-color: #303030;
    --primary-border-color: #282828;
    --secondary-tag-color: #282828;
    --border-color: #3d3d3d;

    /* Global Elements */
    --background: var(--primary-background-color-light);
    --foreground: var(--primary-font-color-light);
    --card: var(--primary-background-color-light);
    --card-foreground: var(--primary-font-color-light);
    --popover: var(--primary-background-color-light);
    --popover-foreground: var(--primary-font-color-light);
    --muted: var(--secondary-background-color-light);
    --muted-foreground: var(--secondary-font-color-light);
    --accent: var(--secondary-tag-color-light);
    --accent-foreground: var(--primary-font-color-light);
    --border: var(--primary-border-color-light);
    --border-light: #e5e5e5;
    --input: var(--primary-border-color-light);
    --ring: var(--primary);
    --secondary: #303030;
    --secondary-foreground: #9b9b9b;
    --error-color: #d81b60;
    --tag: var(--secondary-tag-color-light);
    --font-monospace: 'IBM Plex Mono';

    /* Spacing and Layout */
    --radius: 0.5rem;
    --container-max-width: 730px;
    --header-height: 60px;
    --main-padding: 0px 10px 100px;
    --main-padding-mobile: 0 1.85rem 60px;
    --heading-margin: 22px;
    --subheading-margin: 18px;
    --subsubheading-margin: 6px;
    --list-item-spacing: 6px;
    --list-margin: 10px;
    --element-margin: 14px;
    --paragraph-margin: 16px;
    --column-gap: 48px;
    --nav-sidebar-width: 200px;
    --nav-sidebar-offset: 0px;
  }

  .dark,
  [data-theme='dark'] {
    /* Dark theme */
    --background: var(--primary-background-color);
    --foreground: var(--secondary-font-color);
    --card: var(--secondary-background-color);
    --card-foreground: var(--secondary-font-color);
    --popover: var(--secondary-background-color);
    --popover-foreground: var(--secondary-font-color);
    --muted: var(--secondary-background-color-var2);
    --muted-foreground: #9b9b9b;
    --accent: var(--tertiary-background-color);
    --accent-foreground: var(--secondary-font-color);
    --border: var(--border-color);
    --input: var(--border-color);
    --ring: var(--primary);
    --secondary: var(--secondary-background-color);
    --tag: var(--secondary-tag-color);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply overflow-x-hidden scroll-smooth;
    scroll-padding-top: 5rem;
  }

  body {
    @apply bg-background text-foreground overflow-x-hidden antialiased;
    font-family: 'Public Sans', sans-serif;
    font-size: 1.0625rem;
    line-height: 1.58;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    overscroll-behavior: none;
  }

  /* Apply serif font to .memo-content */
  .memo-content {
    font-family: charter, Georgia, Cambria, serif;
    font-size: 1.0625rem;
    letter-spacing: -0.0125rem;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply scroll-mt-20 font-serif tracking-tight;
    color: var(--foreground);
    line-height: 1.24;
    padding: 0 !important;
    font-weight: 600;
  }

  img,
  video {
    @apply max-w-full rounded-md;
  }

  /* Fix main layout */
  main {
    width: 100%;
    position: relative;
  }
}

/* Custom components */
@layer components {
  /* Table of Contents styling */
  .table-of-contents {
    @apply my-4 text-sm;
  }

  .table-of-contents ul {
    @apply space-y-1 pl-4;
  }

  .table-of-contents a {
    @apply text-muted-foreground hover:text-primary block rounded px-2 py-1 no-underline transition-colors;
  }

  .table-of-contents a:hover {
    @apply bg-muted;
  }

  .table-of-contents a.active {
    @apply text-primary relative font-medium;
  }

  .table-of-contents a.active::before {
    content: '';
    @apply bg-primary absolute top-1/2 left-[-5px] h-[70%] w-[3px] -translate-y-1/2 rounded-sm;
  }

  /* Heading level classes for TOC */
  .heading-level-1 {
    @apply text-foreground ml-0;
  }

  .heading-level-2 {
    @apply text-muted-foreground ml-4;
  }

  .heading-level-3 {
    @apply text-muted-foreground ml-8 text-[13px];
  }

  .heading-level-4,
  .heading-level-5,
  .heading-level-6 {
    @apply text-muted-foreground ml-12 text-[13px];
  }

  /* TOC indicator customization */
  .dark .toc-indicator {
    @apply bg-border;
  }

  .dark .toc-indicator.active {
    @apply bg-border-light;
  }

  .toc-indicator {
    @apply bg-border-light h-0.5 rounded-sm;
  }

  .toc-indicator.active {
    @apply bg-border;
  }

  /* Tags styling */
  .memo-tag {
    @apply bg-muted text-muted-foreground hover:bg-muted/80 inline-flex items-center rounded-md px-2 py-1 text-sm font-medium;
  }

  /* Sidebar & Navigation */
  .sidebar-hover-indicator {
    @apply bg-background text-primary border-primary absolute top-1/2 left-1.5 z-20 flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded-full border shadow-[0_0_5px_rgba(225,63,94,0.3)] transition-all;
  }

  /* Mascots */
  .neko,
  .neko2 {
    @apply pointer-events-none fixed z-10;
  }

  .neko {
    @apply right-4 bottom-4 h-auto w-24 max-w-[15vw];
  }

  .neko2 {
    @apply right-16 bottom-24 z-[5] h-auto w-20 max-w-[10vw];
  }

  /* Hide mascots when command palette is open */
  body.cmd-palette-open .neko,
  body.cmd-palette-open .neko2 {
    @apply opacity-0;
  }

  /* Yggdrasil tree background */
  .yggdrasil-tree {
    @apply pointer-events-none absolute bottom-8 left-1/2 -z-10 w-1/5 max-w-xs -translate-x-1/2 object-contain opacity-[0.03] md:w-[20vw] dark:opacity-10;
  }

  /* Prose styling */
  .prose {
    @apply max-w-none;
  }

  .prose :where(h1, h2, h3, h4, h5, h6) {
    @apply font-bold;
  }

  .prose :where(pre) {
    @apply bg-muted mt-6 mb-6 box-border w-full overflow-x-auto rounded-md border-none p-4 font-mono text-sm;
  }

  .prose :where(code):not(:where(pre) *) {
    @apply bg-muted rounded px-1 py-0.5 font-mono text-sm;
  }

  .prose :where(a) {
    @apply text-primary hover:underline;
  }

  .prose img {
    @apply rounded-md;
  }

  .prose table {
    @apply mt-6 mb-6 w-full border-collapse;
  }

  .prose th,
  .prose td {
    @apply border p-3 text-left align-top;
  }

  .prose thead {
    @apply bg-muted sticky top-0 z-10;
  }

  .prose th {
    @apply font-medium;
  }

  /* Reading mode */
  .reading-mode .right-sidebar {
    @apply hidden lg:hidden;
  }

  /* Command palette customization */
  .command-palette {
    @apply relative;
  }

  /* Command palette open state */
  body.cmd-palette-open {
    @apply overflow-hidden;
  }
}

/* Utilities */
@layer utilities {
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Grid template areas */
  .grid-areas-\[pagetitle_pagetitle_pagetitle_pagetitle\] {
    grid-template-areas: 'pagetitle pagetitle pagetitle pagetitle';
  }

  .justify-right {
    justify-content: right;
  }

  .justify-self-right {
    justify-self: right;
  }

  .overflow-wrap-break-word {
    overflow-wrap: break-word;
  }

  .hyphens-none {
    hyphens: none;
  }

  /* Animation utilities */
  .animate-fadeIn {
    animation: fadeIn 0.1s ease-in-out forwards;
  }

  .animate-slideUp {
    animation: slideUp 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* We're using Tailwind's responsive classes instead of custom media queries */
