<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta name=description property="og:description" content><meta name=keywords content><meta property="og:type" content="website"><meta property="og:url" content="https://note.d.foundation/playbook/engineering/frontend/code-style/"><meta property="og:image" content="https://note.d.foundation/img/LOGO.png"><link rel=icon type=image/x-icon href=https://note.d.foundation/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://note.d.foundation/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://note.d.foundation/favicon-32x32.png><link rel=apple-touch-icon href=https://note.d.foundation/apple-touch-icon.png><title>| Dwarves Foundation</title><meta name=description content><link rel=canonical href=https://note.d.foundation/playbook/engineering/frontend/code-style/><link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><script defer data-domain=note.d.foundation src=https://plausible.io/js/script.js></script><style>:root{--primary-color:#e13F5e;--primary-font-color:#ddd;--primary-font-color-light:#333;--main-padding:48px;--column-gap:20px}body{font-family:ibm plex sans,sans-serif;font-size:16px;color:#000;text-rendering:optimizeLegibility;padding:2rem;max-width:100%;margin:0;padding:0;background-color:#fff;line-height:1.5;min-height:100vh;display:flex;flex-direction:column;overflow-wrap:break-word;hyphens:auto}h1,h2,h3,h4{color:var(--primary-font-color)}h1{font-size:45px}h2{font-size:30px}h3{font-size:22px}h4{font-size:15px}q{font-size:20px;max-width:500px;display:block;margin-left:30px}pre{font-family:monospace;background:#000;color:#dadada;padding:15px;border-radius:2px;overflow-x:scroll;width:100%;box-sizing:border-box}pre>code{display:block;text-indent:0;white-space:inherit;font-weight:400}code{font-family:monospace;font-size:12px;background:#000;color:#dadada;padding:2px 5px;white-space:wrap;border-radius:2px;font-weight:700;display:inline-block;line-height:16px;overflow-x:scroll;margin-bottom:-4px}code comment{color:#777}code.button{background:#fff;color:#000;font-size:smaller;display:inline-block;padding:0 6px;font-weight:700;border-radius:2px;line-height:22px}a[href*="#"]{text-decoration:none}.note-title{display:inline-grid;width:100%;max-width:600px;grid-template-areas:"pagetitle pagetitle" "date tags" "authors authors"}.note-title .pagetitle{grid-area:pagetitle}.note-title .date{grid-area:date;color:#636466}.note-title .tags{grid-area:tags;justify-self:right}.note-title .authors{grid-area:authors}.grid{display:inline-grid;grid-template-areas:"title title title" "subtitle subtitle subtitle" "tabmenu tabmenu tabmenu" "nav content pagenav" "nav content pagenav";grid-template-rows:100px 75px 60px 1fr 1fr;grid-template-columns:minmax(0,350px)2fr 1fr;padding-bottom:45px}.grid>*{padding:0 0 0 45px}.grid .title{grid-area:title;color:var(--primary-color)}.grid .subtitle{grid-area:subtitle;font-size:18px;padding-top:16px}.active{color:var(--primary-color);padding-bottom:17px;border-bottom:2px solid var(--primary-color)}nav.tab-menu{grid-area:tabmenu;border-bottom:1px solid #e7e7e7}nav.tab-menu ul{list-style-type:none;padding:0}nav.tab-menu ul li{font-size:16px;font-weight:500;display:inline-block;margin-right:45px}nav.tab-menu ul li a{text-decoration:none;color:inherit}nav.menu{padding:29px 0 0 45px;line-height:22px;margin-top:-2px;white-space:nowrap;grid-area:nav}details{margin-left:-7px;overflow:hidden;font-size:14px;font-weight:500}.section-home{font-size:14px;font-weight:500;line-height:4}summary{padding:5px;display:block;padding-left:24px;position:relative;cursor:pointer}summary:before{content:'';border-width:.4rem;border-style:solid;border-color:transparent transparent transparent #000;position:absolute;top:10px;left:10px;transform:rotate(0);transform-origin:.2rem 50%;transition:.25s transform ease}details[open]>summary:before{transform:rotate(90deg)}details summary::-webkit-details-marker{display:none}details>ul{margin-bottom:0}hr{margin-left:0;max-width:600px}nav .site-nav{display:block}nav .site-nav section{margin-top:-2px}nav .site-nav section h2{margin:20px 0;font-size:24px;text-transform:lowercase}nav.menu ul{padding:0 10px 10px 0;margin:0;list-style-type:none;line-height:22px}main{grid-area:content;padding:var(--main-padding);max-width:100%;box-sizing:border-box}main>ul{line-height:25px;margin:0}main>ul>li>a{text-decoration:underline}.dual-list>ul{columns:2}.single-list>ul{columns:2}.profile img{width:100px;height:100px;object-fit:cover;aspect-ratio:1/1}.profile object{width:100px;height:100px;object-fit:cover;aspect-ratio:1/1}table,th,td{border:1px solid;border-collapse:collapse;border-spacing:0}tr{max-height:100px;max-width:100px}td{padding:0 20px;max-width:300px;max-height:100px;overflow:hidden;text-overflow:ellipsis}td:has(img){padding:0;line-height:0}#TableOfContents>ul>li>a{text-decoration:underline}#TableOfContents>ul{display:grid;column-gap:var(--column-gap);box-sizing:border-box;grid-template-columns:repeat(auto-fill,minmax(var(--nav-sidebar-width),calc(50% - var(--column-gap))));line-height:20px}#TableOfContents li{white-space:nowrap;list-style-type:decimal-leading-zero;list-style-position:inside;overflow:hidden;text-overflow:ellipsis}.notice{padding:20px;border:2px solid #000}main>blockquote{padding:20px;border:2px solid #000}main>*{max-width:600px;margin-bottom:30px}header{padding:var(--main-padding);border-bottom:1px solid #363636}header h1{display:inline}footer{margin-top:auto;padding:var(--main-padding);clear:both}nav .site-nav ul li{list-style-type:none;display:flex;font-variant-numeric:tabular-nums;font-size:14px;padding-left:20px}li:has(input[type=checkbox]){display:block;list-style-type:none}ul:has(li input[type=checkbox]){padding:0}ul li a{overflow:hidden;text-overflow:ellipsis;width:calc(var(--nav-sidebar-width) + var(--nav-sidebar-offset));background-color:#fff}ul li a:hover{white-space:nowrap;width:100%;z-index:10}ul li p{margin-block-end:0;margin-block-start:0}time{padding-right:1rem}blockquote{margin:1em 0;padding:0 2em;border-left:3px solid #eee}img{max-width:100%}a,a:visited{color:#000}@media(prefers-color-scheme:dark){summary:before{border-color:transparent transparent transparent #fff}nav.tab-menu{border-bottom:1px solid #3d3d3d}a,a:visited{color:#dadada}body{background:#1e1e1e;color:#dadada}body a{color:#dadada}pre{background:#fff;color:#1e1e1e}code{background:#fff;color:#1e1e1e}body select{color:#000;background-color:#fff}.project{border-left:2px solid #fff}.notice{border-color:#fff}.mono{filter:invert(1)}.progress>div{background-color:#fff}.progress>div>span{color:#000}main>blockquote{border-color:#fff}ul li a{background-color:inherit}section>ul li a{background-color:inherit}}@media(prefers-color-scheme:light){h1,h2,h3,h4{color:var(--primary-font-color-light)}}@media only screen and (max-width:1100px){:root{--nav-sidebar-width:140px;--nav-sidebar-offset:0px}nav{width:100%}nav .site-nav section{margin:0 10px 10px 0}nav.menu{max-width:100%;box-sizing:border-box;display:inline-block}nav .site-nav{display:grid;column-gap:var(--column-gap);grid-template-columns:repeat(auto-fill,minmax(var(--nav-sidebar-width),1fr))}main{display:inline-block;width:unset}main>*{max-width:100%}ul li a{width:var(--nav-sidebar-width)}}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"playbook","name":"","headline":"","alternativeHeadline":"","description":"Code style While the vast majority of base code style is enforced by ESLint and Prettier, please also where possible, stick to the contribution guidelines below. These rules should be kept in mind when reviewing Pull Requests:\nCode should be functional in style rather than Object Orientated or Imperative unless there are no clean alternatives.\nUse pure functions where possible to make them testable and modular. Avoid mutating variables and the let keyword.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/note.d.foundation\/playbook\/engineering\/frontend\/code-style\/"},"author":{"@type":"Person","name":"Han Ngo"},"creator":{"@type":"Person","name":"Han Ngo"},"accountablePerson":{"@type":"Person","name":"Han Ngo"},"copyrightHolder":"Dwarves Foundation","copyrightYear":"0001","date":"0001-01-01T00:00:00.00Z","dateCreated":"0001-01-01T00:00:00.00Z","datePublished":"0001-01-01T00:00:00.00Z","dateModified":"0001-01-01T00:00:00.00Z","publisher":{"@type":"Organization","name":"Dwarves Foundation","url":"https://note.d.foundation/","logo":{"@type":"ImageObject","url":"https:\/\/note.d.foundation\/","width":"32","height":"32"}},"image":"https://note.d.foundation/","url":"https:\/\/note.d.foundation\/playbook\/engineering\/frontend\/code-style\/","wordCount":"915","genre":[],"keywords":[]}</script><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><script type=text/javascript>window.addEventListener("DOMContentLoaded",function(){document.body.style.visibility="visible",document.body.style.opacity=1})</script></head><body class=playbook><div class=grid><h1 class=title><a style=color:inherit;text-decoration:none href=/site-index>Dwarves Notes</a></h1><div class=subtitle>A collection of notes for everything we do and operate at Dwarves.</div><nav class=tab-menu><ul><li><a href=/>Home</a></li><li><a href=/guild>Guild</a></li><li><a href=/memo>Memo</a></li><li><a href=https://brain.d.foundation/>Brainery</a></li><li><a href=/newsletter>Newsletter</a></li><li><a href=/site-index>Index</a></li></ul></details></nav><nav class=menu><section class=site-nav></section></nav><main><div class=note-title><h1 class=pagetitle></h1><div class=date>Jan 1, 0001</div><div class=tags>Tags:</div></div><hr><h1 id=code-style><a href=#code-style>Code style <a href=#code-style></a></a></h1><p>While the vast majority of base code style is enforced by <a href=https://eslint.org/>ESLint</a> and <a href=https://prettier.io/>Prettier</a>, please also where possible, stick to the contribution guidelines below. These rules should be kept in mind when reviewing Pull Requests:</p><ul><li><p>Code should be functional in style rather than Object Orientated or Imperative unless there are no clean alternatives.</p><ul><li>Use pure functions where possible to make them testable and modular.</li><li>Avoid mutating variables and the <code>let</code> keyword.</li><li>Prefer functional & immutable array methods .ie <code>map</code>/<code>filter</code>/<code>reduce</code>/<code>some</code>/<code>every</code> over any types of mutable <code>for</code> loop.</li><li>Prefer &ldquo;return early&rdquo; coding style, more about it <a href=https://medium.com/@matryer/line-of-sight-in-code-186dd7cdea88>here</a>.</li><li>Avoid classes and stateful modules where possible.</li><li>Don&rsquo;t Repeat Yourself. Make extensive use of the constants and utils files for re-usable strings and methods.</li><li>Don&rsquo;t obsess over performance of code, obsess over making it clear.</li><li>The above rules can be relaxed for test scripts.</li></ul></li><li><p>React components should be simple and composable and cater to real life UI design problems:</p><ul><li><p><strong>Simplicity</strong>: Strive to keep the component API fairly simple and show real-world scenarios of using the component.</p></li><li><p><strong>Representational</strong>: React components should be templates, free of logic, and purely presentational. It aims to make our components shareable and easy to test.</p></li><li><p><strong>Composition</strong>: Break down components into smaller parts with minimal props to keep complexity low, and compose them together. This will ensure that the styles and functionality are flexible and extensible.</p></li><li><p><strong>Accessibility</strong>: When creating a component, keep accessibility top of mind. This includes keyboard navigation, focus management, color contrast, voice over, and the correct aria-* attributes.</p></li><li><p><strong>Naming Props</strong>: We all know naming is the hardest thing in this industry. Generally, ensure a prop name is indicative of what it does. Boolean props should be named using auxiliary verbs such as <code>does</code>, <code>has</code>, <code>is</code> and <code>should</code>. For example, Button uses <code>isDisabled</code>, <code>isLoading</code>, etc.</p></li></ul></li><li><p>When doing styling, strive to use <code>tailwindcss</code> classes for consistency and painless maintenance.</p><ul><li><p>Avoid hard coding colors. All colors from the design guideline should be pre-defined in <a href=../tailwind.config.js><code>tailwind.js</code></a>. Please use them with respect.</p></li><li><p>Try to avoid injecting styles via <code>style</code> attribute because it&rsquo;s impossible to build responsiveness with inline styles. Strive to only use Tailwind classes for sizing, spacing, and building grid layouts.</p><pre><code class=language-jsx>// Don't
&lt;div style={{marginLeft: '8px'}}&gt;&lt;/div&gt;

// Do
&lt;div className=&quot;ml-2&quot;&gt;&lt;/div&gt;

// Grid layout
&lt;div className=&quot;grid grid-cols-3 gap-5&quot;&gt;
  &lt;div className=&quot;col-span-2&quot;&gt;&lt;/div&gt;
  &lt;div className=&quot;col-span-1&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre></li></ul></li><li><p>Maintain the separation of concerns in the folder, for example:</p><ul><li><code>constants/</code> contains shared variables used across the app.</li><li><code>components/</code> contains shared ui components used across the app.</li><li><code>utils/</code> contains shared functions used across the app.</li><li><code>hooks/</code> contains shared hooks used across the app.</li><li><code>types/</code> contains common <code>TypeScript</code> types or interfaces.</li></ul></li><li><p>When adding third party libraries to the project consider carefully the following;</p><ul><li>Is this a trivial package we can easily write in-house? If so, take the time to roll your own.</li><li>Is this library well supported, under active development and widely used in the community? If not, do not use it.</li><li>Do we use a similar but different library for the same task elsewhere in the company? If so, use this library for developer familiarity and consistency.</li><li>Will this library impact significantly performance or bundle size eg <code>Lodash</code> or <code>Moment</code>? If so, consider carefully if it is necessary or if there is a better alternative.</li></ul></li><li><p>TypeScript helps write code better but should be used with care to not lose its strengths:</p><ul><li>Avoid using <code>any</code> when possible. Using <code>any</code> is sometimes valid, but should rearely be used, even if to make quicker progress. Even <code>Unknown</code> is better than using <code>any</code> if you aren&rsquo;t sure of an input parameter.</li><li>Pay attention when using the non-null assertion operator <code>!</code>. Only use if you know that a variable cannot be null right now rather than blindly using it to pass the validation step.</li></ul></li><li><p>File naming should be <code>PascalCase</code> for all React components files and <code>kebab-case</code> for the rest.</p></li><li><p>Exports from files can be either as variable or default exports, but please stick to naming the object before using <code>export default</code> to avoid anonymous module names in stack traces and React dev tools.</p></li><li><p>Your app should be fast but also remember &ldquo;Premature optimization is the root of all evil&rdquo;. <strong>If you think itâ€™s slow, prove it with a benchmark.</strong>, the profiler of <a href=https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi>React Developer Tools</a> (Chrome extension) is your friend! Once you find the root cause, try to follow the suggestions to fix it:</p><ul><li>Use <code>useMemo</code> mostly just for expensive calculations.</li><li>Use <code>React.memo</code>, <code>useMemo</code>, and <code>useCallback</code> for reducing re-renders, they shouldn&rsquo;t have many dependencies and the dependencies should be mostly primitive types.</li><li>Make sure your <code>React.memo</code>, <code>useCallback</code> or <code>useMemo</code> is doing what you think it&rsquo;s doing (is it really preventing rerendering?).</li><li>Stop punching yourself every time you blink (fix slow renders before fixing rerenders).</li><li>Putting your state as close as possible to where it&rsquo;s being used will not only make your code so much easier to read but It would also make your app faster (state colocation).</li><li><code>Context</code> should be logically separated, do not add to many values in one context provider. If any of the values of your context changes, all components consuming that context also rerenders even if those components don&rsquo;t use the specific value that was actually changed.</li><li>You can optimize <code>context</code> by separating the <code>state</code> and the <code>dispatch</code> function.</li><li>Know the terms <a href=https://nextjs.org/docs/advanced-features/dynamic-import><code>lazy loading</code></a> and <a href=https://reactjs.org/docs/code-splitting.html><code>bundle/code splitting</code></a></li><li>Window large lists (with <a href=https://github.com/tannerlinsley/react-virtual><code>tannerlinsley/react-virtual</code></a> or similar).</li><li>A smaller bundle size usually also means a faster app. You can visualize the code bundles you&rsquo;ve generated with <a href=https://www.npmjs.com/package/@next/bundle-analyzer><code>@next/bundle-analyzer</code></a>.</li></ul></li></ul><h2 id=read-on><a href=#read-on>Read on: <a href=#read-on></a></a></h2><ul><li><a href=/playbook/engineering/frontend/tech-ecosystem/>Tech ecosystem</a></li><li><a href=/playbook/engineering/frontend/writing-test/>Writting test</a></li><li><a href=/playbook/engineering/frontend/ui-checklist/>UI checklist</a></li><li><a href=/playbook/engineering/frontend/logging-monitoring/>Logging and monitoring</a></li></ul></main></div></body></html>