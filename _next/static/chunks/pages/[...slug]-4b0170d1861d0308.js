(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2203],{63021:(e,t,r)=>{"use strict";function n(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/assets/home_cover.webp",n=null===(t=e.content)||void 0===t?void 0:t.match(/!\[.*?\]\((.*?)\)/),a=n?n[1]:null;if(a){if(a.startsWith("/")||a.startsWith("http"))return a;{let t=e.filePath.toLowerCase().replace(/\/[^/]+\.md$/,"").replace(/ /g,"-").replace(/[^a-zA-Z0-9\/_\.-]+/g,"-").replace(/(-\/|-$|_index$)/g,"");return"/content/".concat(t,"/").concat(a)}}return r}function a(e){let t=e.toLowerCase().replace(/\.md$/,"").replace(/ /g,"-").replace(/[^a-zA-Z0-9/_-]+/g,"-").replace(/(-\/|-$|_index$)/g,"");return(t.endsWith("/")&&(t=t.slice(0,-1)),t.startsWith("/"))?t:"/".concat(t)}r.d(t,{O:()=>n,T:()=>a})},67731:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...slug]",function(){return r(71099)}])},71099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>em,default:()=>eh});var n=r(5640),a=r(50148),i=r(28771),s=r(8686),o=r(95996);let c=()=>{let{isDark:e,isThemeLoaded:t}=(0,o.wR)(),r=(0,a.useRef)(null),i=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(!t||!r.current||i.current)return;let n=document.createElement("script");return n.src="https://utteranc.es/client.js",n.setAttribute("repo","dwarvesf/memo-comments"),n.setAttribute("issue-term","pathname"),n.setAttribute("theme",e?"github-dark":"github-light"),n.setAttribute("crossorigin","anonymous"),n.async=!0,n.onload=()=>{i.current=!0},setTimeout(()=>{r.current&&!r.current.hasChildNodes()&&r.current.appendChild(n)},0),()=>{!i.current&&n.parentNode&&n.parentNode.removeChild(n)}},[t]),(0,a.useEffect)(()=>{if(!i.current)return;let t=document.querySelector(".utterances-frame");if(t){var r;null===(r=t.contentWindow)||void 0===r||r.postMessage({type:"set-theme",theme:e?"github-dark":"github-light"},"https://utteranc.es")}},[e]),(0,n.jsx)("div",{ref:r,className:"relative"})};var d=r(61385),l=r.n(d),u=r(63021),m=r(71573),h=r(47822);function f(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,m.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}var x=r(84050),p=r.n(x),g=r(67882),w=r(84668),v=r(78386),y=r(25268),b=r(75137),N=r(44562),j=r(397);async function T(e,t){let r;let{abi:n,chainId:a,connector:i,...s}=t;r=t.account?t.account:(await (0,j.r)(e,{chainId:a,connector:i})).account;let o=e.getClient({chainId:a}),c=(0,N.T)(o,b.v,"simulateContract"),{result:d,request:l}=await c({...s,abi:n,account:r});return{chainId:o.chain.id,result:d,request:{...l,chainId:a}}}var k=r(45060),C=r(54664),I=r(84938),_=r(39423),E=r(94217),q=r(75626),F=r(96526),P=r(7819),M=r(92513),R=r(32323),A=r(77314),O=r(16869),S=r(75272),z=r(47167),L=r(12341),$=r(32031),U=r(82002),K=r(96084),G=r(46880),H=r(91889),W=r(34437),Z=r(40937),B=r(79089);let Q=new G.A(128);async function J(e,t){let{account:r=e.account,chain:n=e.chain,accessList:a,authorizationList:i,blobs:s,data:o,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:m,nonce:h,value:f,...x}=t;if(void 0===r)throw new F.T({docsPath:"/docs/actions/wallet/sendTransaction"});let p=r?(0,q.J)(r):null;try{(0,H.c)(t);let r=await (async()=>t.to?t.to:null!==t.to&&i&&i.length>0?await (0,O.g)({authorization:i[0]}).catch(()=>{throw new A.C("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(p?.type==="json-rpc"||null===p){let t;null!==n&&(t=await (0,R.T)(e,W.T,"getChainId")({}),function({chain:e,currentChainId:t}){if(!e)throw new S.jF;if(t!==e.id)throw new S.EH({chain:e,currentChainId:t})}({currentChainId:t,chain:n}));let g=e.chain?.formatters?.transactionRequest?.format,w=(g||K.Bv)({...(0,U.o)(x,{format:g}),accessList:a,authorizationList:i,blobs:s,chainId:t,data:o,from:p?.address,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:m,nonce:h,to:r,value:f}),v=Q.get(e.uid);try{return await e.request({method:v?"wallet_sendTransaction":"eth_sendTransaction",params:[w]},{retryCount:0})}catch(t){if(!1===v)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[w]},{retryCount:0}).then(t=>(Q.set(e.uid,!0),t)).catch(r=>{if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw Q.set(e.uid,!1),t;throw r});throw t}}if(p?.type==="local"){let t=await (0,R.T)(e,Z.ft,"prepareTransactionRequest")({account:p,accessList:a,authorizationList:i,blobs:s,chain:n,data:o,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:m,nonce:h,nonceManager:p.nonceManager,parameters:[...Z.MM,"sidecars"],value:f,...x,to:r}),g=n?.serializers?.transaction,w=await p.signTransaction(t,{serializer:g});return await (0,R.T)(e,B.L,"sendRawTransaction")({serializedTransaction:w})}if(p?.type==="smart")throw new F.Z({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new F.Z({docsPath:"/docs/actions/wallet/sendTransaction",type:p?.type})}catch(e){if(e instanceof F.Z)throw e;throw function(e,{docsPath:t,...r}){let n=(()=>{let t=(0,$.l)(e,r);return t instanceof z.RM?e:t})();return new L.$s(n,{docsPath:t,...r})}(e,{...t,account:p,chain:t.chain||void 0})}}async function V(e,t){let{abi:r,account:n=e.account,address:a,args:i,dataSuffix:s,functionName:o,...c}=t;if(void 0===n)throw new F.T({docsPath:"/docs/contract/writeContract"});let d=n?(0,q.J)(n):null,l=(0,P.p)({abi:r,args:i,functionName:o});try{return await (0,R.T)(e,J,"sendTransaction")({data:`${l}${s?s.replace("0x",""):""}`,to:a,account:d,...c})}catch(e){throw(0,M.j)(e,{abi:r,address:a,args:i,docsPath:"/docs/contract/writeContract",functionName:o,sender:d?.address})}}async function D(e,t){let r;let{account:n,chainId:a,connector:i,...s}=t;r="object"==typeof n&&n?.type==="local"?e.getClient({chainId:a}):await (0,j.r)(e,{account:n??void 0,chainId:a,connector:i});let o=(0,N.T)(r,V,"writeContract");return await o({...s,...n?{account:n}:{},chain:a?{id:a}:null})}var X=r(29144),Y=r(5339),ee=r(83781),et=r(51763);async function er(e,t){let{chainId:r,timeout:n=0,...a}=t,i=e.getClient({chainId:r}),s=(0,N.T)(i,Y.n,"waitForTransactionReceipt"),o=await s({...a,timeout:n});if("reverted"===o.status){let e=(0,N.T)(i,ee.x,"getTransaction"),t=await e({hash:o.transactionHash}),r=(0,N.T)(i,et.T,"call"),n=await r({...t,data:t.input,gasPrice:"eip1559"!==t.type?t.gasPrice:void 0,maxFeePerGas:"eip1559"===t.type?t.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===t.type?t.maxPriorityFeePerGas:void 0});throw Error(n?.data?(0,X.IQ)(`0x${n.data.substring(138)}`):"unknown reason")}return{...o,chainId:i.chain.id}}var en=r(77261),ea=r(35219),ei=r(8514);async function es(e){let t=await fetch("https://arweave.net/".concat(e));if(!t.ok)throw Error("Failed to fetch Arweave data");return t.json()}async function eo(e){let t=await fetch("https://memo-nft-api-prod.fly.dev/minters/".concat(e));if(!t.ok)throw Error("Failed to fetch mint info");return t.json()}var ec=r(7897),ed=r(86487),el=r(42012);let eu=e=>{let{metadata:t}=e,{tokenId:r,permaStorageId:i,title:s,author:o,authorRole:c,image:d}=t||{},{isConnected:u,address:x}=(0,w.F)(),b=(0,v.i)(),{switchChain:N,chains:q}=(0,y.R)(),{openConnectModal:F}=(0,el.Vx)(),[P,M]=(0,a.useState)("Calculating..."),R=b===ea.Z.id?g.rn:g.N_,A=(0,a.useMemo)(()=>"".concat(R.substring(0,10),"...").concat(R.substring(R.length-6)),[R]),O=(0,a.useMemo)(()=>{var e;let t=q.find(e=>e.id===g.LP.id);return(null==t?void 0:t.blockExplorers)?t.blockExplorers.default.url+"/address/"+R:(null===(e=g.LP.blockExplorers)||void 0===e?void 0:e.default.url)+"/address/"+g.N_},[q,R]),{data:S}=function(e={}){let{abi:t,address:r,connector:n,functionName:i,query:s={}}=e,o=(0,I.U)(e),{data:c}=function(e={}){let{query:t={},...r}=e,n=(0,I.U)(r),i=(0,_.jE)(),{address:s,connector:o,status:c}=(0,w.F)({config:n}),d=(0,v.i)({config:n}),l=e.connector??o,{queryKey:u,...m}=function(e,t={}){return{gcTime:0,async queryFn({queryKey:r}){let{connector:n}=t,{connectorUid:a,scopeKey:i,...s}=r[1];return(0,j.r)(e,{...s,connector:n})},queryKey:function(e={}){let{connector:t,...r}=e;return["connectorClient",{...(0,k.xO)(r),connectorUid:t?.uid}]}(t)}}(n,{...e,chainId:e.chainId??d,connector:l}),h=!!(("connected"===c||"reconnecting"===c&&l?.getProvider)&&(t.enabled??!0)),f=(0,a.useRef)(s);return(0,a.useEffect)(()=>{let e=f.current;!s&&e?(i.removeQueries({queryKey:u}),f.current=void 0):s!==e&&(i.invalidateQueries({queryKey:u}),f.current=s)},[s,i]),(0,C.IT)({...t,...m,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}({config:o,connector:n,query:{enabled:void 0===e.account}}),d=(0,v.i)({config:o}),l=function(e,t={}){return{async queryFn({queryKey:r}){let{abi:n,connector:a}=t;if(!n)throw Error("abi is required");let{scopeKey:i,...s}=r[1],{address:o,functionName:c}=s;if(!o)throw Error("address is required");if(!c)throw Error("functionName is required");return T(e,{abi:n,connector:a,...s})},queryKey:function(e={}){let{abi:t,connector:r,...n}=e;return["simulateContract",(0,k.xO)(n)]}(t)}}(o,{...e,account:e.account??c?.account,chainId:e.chainId??d}),u=!!(t&&r&&i&&(s.enabled??!0));return(0,C.IT)({...s,...l,enabled:u})}({address:R,abi:g.fO,functionName:"mintNFT",args:r?[r,g.iJ]:void 0}),{writeContract:z,data:L,isPending:$}=function(e={}){var t;let{mutation:r}=e,n=(t=(0,I.U)(e),{mutationFn:e=>D(t,e),mutationKey:["writeContract"]}),{mutate:a,mutateAsync:i,...s}=(0,E.n)({...r,...n});return{...s,writeContract:a,writeContractAsync:i}}(),{isLoading:U,isSuccess:K}=function(e={}){let{hash:t,query:r={}}=e,n=(0,I.U)(e),a=(0,v.i)({config:n}),i=function(e,t={}){return{async queryFn({queryKey:r}){let{hash:n,...a}=r[1];if(!n)throw Error("hash is required");return er(e,{...a,onReplaced:t.onReplaced,hash:n})},queryKey:function(e={}){let{onReplaced:t,...r}=e;return["waitForTransactionReceipt",(0,k.xO)(r)]}(t)}}(n,{...e,chainId:e.chainId??a}),s=!!(t&&(r.enabled??!0));return(0,C.IT)({...r,...i,enabled:s})}({hash:L}),{data:G}=(0,en.Q)({address:R,abi:g.fO,functionName:"getMintCountByTokenId",args:r?[BigInt(r)]:void 0}),{data:H}=(0,en.Q)({address:R,abi:g.fO,functionName:"balanceOf",args:x&&r?[x,BigInt(r)]:void 0}),W=(0,a.useMemo)(()=>!!H&&Number(H)>0,[H]),Z=async()=>{if(!r){console.error("Cannot mint: Token ID is not available");return}(null==S?void 0:S.request)&&z(S.request)},{data:B}=function(e){return(0,ei.I)({queryKey:["mintInfo",e],queryFn:()=>eo(e),enabled:!!e,select:e=>({collectors:e.data.map(e=>e.minter),mintInfo:e.data})})}(r),{data:Q}=function(e){return(0,ei.I)({queryKey:["arweave",e],queryFn:()=>es(e),enabled:!!e})}(i);(0,a.useEffect)(()=>{(async()=>{try{let e=JSON.stringify({tokenId:r,permaStorageId:i,title:s,author:o}),t=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(e)),n=Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("");M(n.substring(0,20))}catch(e){console.error("Failed to calculate content digest:",e),M("Error calculating digest")}})()},[r,i,s,o]);let J=$||U?{text:"Minting...",disabled:!0,onClick:void 0}:K||W?{text:"Minted",disabled:!0,onClick:void 0}:q.map(e=>e.id).includes(b)?u?{text:"Mint",disabled:!1,onClick:Z}:{text:"Connect Wallet",disabled:!1,onClick:F}:{text:"Switch Network",disabled:!1,onClick:()=>N({chainId:g.LP.id})},V=(0,a.useMemo)(()=>{if(null==Q?void 0:Q.image){let e=Q.image.replace("ar://","");return"https://arweave.net/".concat(e)}return"https://arweave.net/".concat(g.fC)},[Q]),X=(0,a.useMemo)(()=>G?Number(G):0,[G]);return(0,n.jsxs)("div",{className:"mb-4 grid gap-6 md:grid-cols-2",children:[(0,n.jsx)(f,{className:"dark:bg-muted/90 rounded-lg bg-[#f8f0f0] p-6 shadow-xs",children:(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"dark:border-border dark:bg-secondary mx-auto flex h-[192px] w-[192px] flex-col overflow-hidden rounded border bg-[#fff]",children:[(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("img",{src:V||d||t.firstImage||"/assets/img/LOGO.png",alt:s,className:"no-zoom h-full w-full rounded-none object-cover"})}),(0,n.jsx)("p",{className:"text-2xs mt-auto px-3 py-2 font-medium",children:(null==Q?void 0:Q.name)||s}),(0,n.jsxs)("div",{className:"dark:border-border flex items-center gap-2 border-t px-3 py-2",children:[(0,n.jsx)(ec.eu,{className:"h-4 w-4",children:(0,n.jsx)(ed.A,{value:o,size:16})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-muted-foreground text-2xs",children:o}),c&&(0,n.jsx)("span",{className:"text-muted-foreground/70 text-2xs",children:c})]})]})]}),(0,n.jsx)("p",{className:"text-muted-foreground text-center text-sm",children:"Mint this entry as an NFT to add it to your collection."}),(0,n.jsx)(h.$,{className:(0,m.cn)("mint-button font-sans",K&&"cursor-not-allowed opacity-50"),onClick:J.onClick,disabled:J.disabled,children:J.text}),(0,n.jsx)("div",{className:"flex justify-center",children:X>0?(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("div",{className:"flex items-center -space-x-2",children:[null==B?void 0:B.mintInfo.slice(0,3).map(e=>(0,n.jsx)(ec.eu,{className:"dark:bg-secondary flex h-6.5 w-6.5 items-center justify-center border-2 bg-[#fff]",children:(0,n.jsx)(ed.A,{value:e.minter,size:24})},e.minter)),(0,n.jsxs)("span",{className:"text-primary z-1 rounded-full border border-[#fcced7] bg-[#fce7eb] px-2 font-sans text-sm leading-[26px]",children:[X," collected"]})]})}):(0,n.jsx)("span",{className:"text-muted-foreground text-sm",children:"Be the first to collect"})})]})}),(0,n.jsx)(f,{className:"dark:bg-muted/90 bg-background-secondary rounded-lg p-6 shadow-xs",children:(0,n.jsxs)("div",{className:"text-foreground flex flex-col gap-6",children:[(0,n.jsx)("h3",{className:"font-sans text-sm font-medium",children:"Verification"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"This entry has been permanently stored onchain and signed by its creator."}),(0,n.jsxs)("dl",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"transaction"}),(0,n.jsx)("dd",{className:"mt-1 font-mono text-[13px] leading-[100%]",children:(0,n.jsx)(l(),{href:"https://viewblock.io/arweave/tx/".concat(i),target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:decoration-primary underline decoration-neutral-100",children:i.substring(0,20)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"nft address"}),(0,n.jsx)("dd",{className:"mint-entry-nft-address mt-1 font-mono text-[13px] leading-[100%]",children:(0,n.jsx)(l(),{href:O,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:decoration-primary underline decoration-neutral-100",children:A})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"content digest"}),(0,n.jsx)("dd",{className:"mt-1 font-mono text-[13px] leading-[100%]",children:P})]})]}),(0,n.jsx)(p(),{src:"/assets/img/neko-sticker.svg",alt:"Neko",width:32,height:32,className:"no-zoom absolute -right-2 -bottom-2 rotate-[14deg]"})]})})]})};var em=!0;function eh(e){let{content:t,frontmatter:d,slug:h,backlinks:f,tocItems:x,metadata:p,directoryTree:g,searchIndex:w,isListPage:v,childMemos:y}=e,{theme:b,isThemeLoaded:N}=(0,o.wR)();(0,a.useEffect)(()=>{!v&&d&&N&&Promise.all([r.e(4662),r.e(3671)]).then(r.bind(r,93671)).then(e=>{try{e.default.initialize({startOnLoad:!1,theme:"dark"===b?"dark":"neutral"});let t=document.querySelectorAll("code.language-mermaid");if(t.length>0){let r=Array.from(t);e.default.run({nodes:r})}}catch(e){console.error("Failed to initialize or run Mermaid:",e)}})},[t,v,d,b,N]);let j=!(null==d?void 0:d.hide_subscription)&&!["home","tags","contributor"].some(e=>h.includes(e));if(v||!d){let e=h.map(m.rS).join(" > ");return(0,n.jsx)(i.H6,{title:e,searchIndex:w,directoryTree:g,children:(0,n.jsx)("div",{className:"flex items-center justify-center",children:y&&(0,n.jsxs)("div",{className:"flex w-fit flex-col gap-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:e}),(0,n.jsx)("ul",{className:"list-disc pl-5",children:y.map(e=>(0,n.jsx)("li",{className:"text-lg",children:(0,n.jsx)(l(),{href:(0,u.T)(e.filePath),className:"hover:text-primary hover:decoration-primary dark:hover:text-primary line-clamp-3 text-[1.0625rem] -tracking-[0.0125rem] underline decoration-neutral-100 transition-colors duration-200 ease-in-out dark:text-neutral-300",children:e.title})},e.filePath))})]})})})}return(0,n.jsx)(i.H6,{title:d.title||"Dwarves Memo",description:d.description,image:d.image,tocItems:x,metadata:p,directoryTree:g,searchIndex:w,children:(0,n.jsxs)("div",{className:"content-wrapper",children:[(0,n.jsx)(i.s7,{title:d.title,description:d.description,backlinks:f,hideFrontmatter:d.hide_frontmatter,hideTitle:d.hide_title,children:(0,n.jsx)("div",{className:"article-content",dangerouslySetInnerHTML:{__html:t}})}),j&&(0,n.jsx)(s.A,{}),!!(null==p?void 0:p.tokenId)&&(0,n.jsx)(eu,{metadata:p}),(0,n.jsx)(c,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2487,8336,8771,636,6593,8792],()=>t(67731)),_N_E=e.O()}]);