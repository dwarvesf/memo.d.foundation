(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2203],{63021:(e,t,r)=>{"use strict";function s(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/assets/home_cover.webp",s=null===(t=e.content)||void 0===t?void 0:t.match(/!\[.*?\]\((.*?)\)/),n=s?s[1]:null;if(n){if(n.startsWith("/")||n.startsWith("http"))return n;{let t=e.filePath.toLowerCase().replace(/\/[^/]+\.md$/,"").replace(/ /g,"-").replace(/[^a-zA-Z0-9\/_\.-]+/g,"-").replace(/(-\/|-$|_index$)/g,"");return"/content/".concat(t,"/").concat(n)}}return r}function n(e){let t=e.toLowerCase().replace(/\.md$/,"").replace(/ /g,"-").replace(/[^a-zA-Z0-9/_-]+/g,"-").replace(/(-\/|-$|_index$)/g,"");return(t.endsWith("/")&&(t=t.slice(0,-1)),t.startsWith("/"))?t:"/".concat(t)}r.d(t,{O:()=>s,T:()=>n})},66229:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>O,default:()=>F});var s=r(5640),n=r(50148),a=r(80205),i=r(8686),l=r(95996);let d=()=>{let{isDark:e,isThemeLoaded:t}=(0,l.wR)(),r=(0,n.useRef)(null),a=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{if(!t||!r.current||a.current)return;let s=document.createElement("script");return s.src="https://utteranc.es/client.js",s.setAttribute("repo","dwarvesf/memo-comments"),s.setAttribute("issue-term","pathname"),s.setAttribute("theme",e?"github-dark":"github-light"),s.setAttribute("crossorigin","anonymous"),s.async=!0,s.onload=()=>{a.current=!0},setTimeout(()=>{r.current&&!r.current.hasChildNodes()&&r.current.appendChild(s)},0),()=>{!a.current&&s.parentNode&&s.parentNode.removeChild(s)}},[t]),(0,n.useEffect)(()=>{if(!a.current)return;let t=document.querySelector(".utterances-frame");if(t){var r;null===(r=t.contentWindow)||void 0===r||r.postMessage({type:"set-theme",theme:e?"github-dark":"github-light"},"https://utteranc.es")}},[e]),(0,s.jsx)("div",{ref:r,className:"relative"})};var o=r(61385),c=r.n(o),u=r(63021),m=r(71573),x=r(47822);function f(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,m.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}var h=r(84050),p=r.n(h),g=r(67882),v=r(84668),b=r(78386),N=r(25268),j=r(1078),y=r(25340),w=r(31193),k=r(77261),_=r(35219),C=r(8514);async function E(e){let t=await fetch("https://arweave.net/".concat(e));if(!t.ok)throw Error("Failed to fetch Arweave data");return t.json()}async function I(e){let t=await fetch("https://memo-nft-api-prod.fly.dev/minters/".concat(e));if(!t.ok)throw Error("Failed to fetch mint info");return t.json()}var T=r(7897),A=r(86487),M=r(42012);let S=e=>{let{metadata:t}=e,{tokenId:r,permaStorageId:a,title:i,author:l,authorRole:d,image:o}=t||{},{isConnected:u,address:h}=(0,v.F)(),S=(0,b.i)(),{switchChain:O,chains:F}=(0,N.R)(),{openConnectModal:L}=(0,M.Vx)(),[P,q]=(0,n.useState)("Calculating..."),z=S===_.Z.id?g.rn:g.N_,$=(0,n.useMemo)(()=>"".concat(z.substring(0,10),"...").concat(z.substring(z.length-6)),[z]),W=(0,n.useMemo)(()=>{var e;let t=F.find(e=>e.id===g.LP.id);return(null==t?void 0:t.blockExplorers)?t.blockExplorers.default.url+"/address/"+z:(null===(e=g.LP.blockExplorers)||void 0===e?void 0:e.default.url)+"/address/"+g.N_},[F,z]),{data:B}=(0,j._)({address:z,abi:g.fO,functionName:"mintNFT",args:r?[r,g.iJ]:void 0}),{writeContract:H,data:R,isPending:Z}=(0,y.x)(),{isLoading:D,isSuccess:G}=(0,w.g)({hash:R}),{data:J}=(0,k.Q)({address:z,abi:g.fO,functionName:"getMintCountByTokenId",args:r?[BigInt(r)]:void 0}),{data:K}=(0,k.Q)({address:z,abi:g.fO,functionName:"balanceOf",args:h&&r?[h,BigInt(r)]:void 0}),Q=(0,n.useMemo)(()=>!!K&&Number(K)>0,[K]),V=async()=>{if(!r){console.error("Cannot mint: Token ID is not available");return}(null==B?void 0:B.request)&&H(B.request)},{data:X}=function(e){return(0,C.I)({queryKey:["mintInfo",e],queryFn:()=>I(e),enabled:!!e,select:e=>({collectors:e.data.map(e=>e.minter),mintInfo:e.data})})}(r),{data:U}=function(e){return(0,C.I)({queryKey:["arweave",e],queryFn:()=>E(e),enabled:!!e})}(a);(0,n.useEffect)(()=>{(async()=>{try{let e=JSON.stringify({tokenId:r,permaStorageId:a,title:i,author:l}),t=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(e)),s=Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("");q(s.substring(0,20))}catch(e){console.error("Failed to calculate content digest:",e),q("Error calculating digest")}})()},[r,a,i,l]);let Y=Z||D?{text:"Minting...",disabled:!0,onClick:void 0}:G||Q?{text:"Minted",disabled:!0,onClick:void 0}:F.map(e=>e.id).includes(S)?u?{text:"Mint",disabled:!1,onClick:V}:{text:"Connect Wallet",disabled:!1,onClick:L}:{text:"Switch Network",disabled:!1,onClick:()=>O({chainId:g.LP.id})},ee=(0,n.useMemo)(()=>{if(null==U?void 0:U.image){let e=U.image.replace("ar://","");return"https://arweave.net/".concat(e)}return"https://arweave.net/".concat(g.fC)},[U]),et=(0,n.useMemo)(()=>J?Number(J):0,[J]);return(0,s.jsxs)("div",{className:"mb-4 grid gap-6 md:grid-cols-2",children:[(0,s.jsx)(f,{className:"dark:bg-muted/90 rounded-lg bg-[#f8f0f0] p-6 shadow-xs",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"dark:border-border dark:bg-secondary mx-auto flex h-[192px] w-[192px] flex-col overflow-hidden rounded border bg-[#fff]",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("img",{src:ee||o||t.firstImage||"/assets/img/LOGO.png",alt:i,className:"no-zoom h-full w-full rounded-none object-cover"})}),(0,s.jsx)("p",{className:"text-2xs mt-auto px-3 py-2 font-medium",children:(null==U?void 0:U.name)||i}),(0,s.jsxs)("div",{className:"dark:border-border flex items-center gap-2 border-t px-3 py-2",children:[(0,s.jsx)(T.eu,{className:"h-4 w-4",children:(0,s.jsx)(A.A,{value:l,size:16})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-2xs",children:l}),d&&(0,s.jsx)("span",{className:"text-muted-foreground/70 text-2xs",children:d})]})]})]}),(0,s.jsx)("p",{className:"text-muted-foreground text-center text-sm",children:"Mint this entry as an NFT to add it to your collection."}),(0,s.jsx)(x.$,{className:(0,m.cn)("mint-button font-sans",G&&"cursor-not-allowed opacity-50"),onClick:Y.onClick,disabled:Y.disabled,children:Y.text}),(0,s.jsx)("div",{className:"flex justify-center",children:et>0?(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:"flex items-center -space-x-2",children:[null==X?void 0:X.mintInfo.slice(0,3).map(e=>(0,s.jsx)(T.eu,{className:"dark:bg-secondary flex h-6.5 w-6.5 items-center justify-center border-2 bg-[#fff]",children:(0,s.jsx)(A.A,{value:e.minter,size:24})},e.minter)),(0,s.jsxs)("span",{className:"text-primary z-1 rounded-full border border-[#fcced7] bg-[#fce7eb] px-2 font-sans text-sm leading-[26px]",children:[et," collected"]})]})}):(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Be the first to collect"})})]})}),(0,s.jsx)(f,{className:"dark:bg-muted/90 bg-background-secondary rounded-lg p-6 shadow-xs",children:(0,s.jsxs)("div",{className:"text-foreground flex flex-col gap-6",children:[(0,s.jsx)("h3",{className:"font-sans text-sm font-medium",children:"Verification"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"This entry has been permanently stored onchain and signed by its creator."}),(0,s.jsxs)("dl",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"transaction"}),(0,s.jsx)("dd",{className:"mt-1 font-mono text-[13px] leading-[100%]",children:(0,s.jsx)(c(),{href:"https://viewblock.io/arweave/tx/".concat(a),target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:decoration-primary underline decoration-neutral-100",children:a.substring(0,20)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"nft address"}),(0,s.jsx)("dd",{className:"mint-entry-nft-address mt-1 font-mono text-[13px] leading-[100%]",children:(0,s.jsx)(c(),{href:W,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:decoration-primary underline decoration-neutral-100",children:$})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-muted-foreground text-2xs font-sans leading-[140%] uppercase",children:"content digest"}),(0,s.jsx)("dd",{className:"mt-1 font-mono text-[13px] leading-[100%]",children:P})]})]}),(0,s.jsx)(p(),{src:"/assets/img/neko-sticker.svg",alt:"Neko",width:32,height:32,className:"no-zoom absolute -right-2 -bottom-2 rotate-[14deg]"})]})})]})};var O=!0;function F(e){let{content:t,frontmatter:r,slug:n,backlinks:l,tocItems:o,metadata:x,directoryTree:f,searchIndex:h,isListPage:p,childMemos:g}=e,v=!(null==r?void 0:r.hide_subscription)&&!["home","tags","contributor"].some(e=>n.includes(e));if(p||!r){let e=n.map(m.rS).join(" > ");return(0,s.jsx)(a.H6,{title:e,searchIndex:h,directoryTree:f,children:(0,s.jsx)("div",{className:"flex items-center justify-center",children:g&&(0,s.jsxs)("div",{className:"flex w-fit flex-col gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:e}),(0,s.jsx)("ul",{className:"list-disc pl-5",children:g.map(e=>(0,s.jsx)("li",{className:"text-lg",children:(0,s.jsx)(c(),{href:(0,u.T)(e.filePath),className:"hover:text-primary hover:decoration-primary dark:hover:text-primary line-clamp-3 text-[1.0625rem] -tracking-[0.0125rem] underline decoration-neutral-100 transition-colors duration-200 ease-in-out dark:text-neutral-300",children:e.title})},e.filePath))})]})})})}return(0,s.jsx)(a.H6,{title:r.title||"Dwarves Memo",description:r.description,image:r.image,tocItems:o,metadata:x,directoryTree:f,searchIndex:h,children:(0,s.jsxs)("div",{className:"content-wrapper",children:[(0,s.jsx)(a.s7,{title:r.title,description:r.description,backlinks:l,hideFrontmatter:r.hide_frontmatter,hideTitle:r.hide_title,children:(0,s.jsx)("div",{className:"article-content",dangerouslySetInnerHTML:{__html:t}})}),v&&(0,s.jsx)(i.A,{}),!!(null==x?void 0:x.tokenId)&&(0,s.jsx)(S,{metadata:x}),(0,s.jsx)(d,{})]})})}},67731:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...slug]",function(){return r(66229)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[2487,4779,3215,205,636,6593,8792],()=>t(67731)),_N_E=e.O()}]);